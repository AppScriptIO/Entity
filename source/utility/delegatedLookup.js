"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.delegatedLookup = exports.conditionDelegatedLookup = exports.nestedPropertyDelegatedLookup = void 0;var _assert = _interopRequireDefault(require("assert"));
var _multiplePrototypeDelegation = require("@dependency/multiplePrototypeDelegation");

const hasOwnProperty = Object.prototype.hasOwnProperty;




const nestedPropertyDelegatedLookup = ({
  target,
  recursive = false,
  propertyPath }) =>


{
  return delegatedLookup({
    target,
    recursive,

    retrieveValueFromPrototype: targetObject => {
      if (!Array.isArray(propertyPath)) propertyPath = [propertyPath];
      let propertyValue = targetObject;
      for (let property of propertyPath) {
        if (hasOwnProperty.call(propertyValue, property)) propertyValue = propertyValue[property];else
        return undefined;
      }
      return propertyValue;
    } });

};exports.nestedPropertyDelegatedLookup = nestedPropertyDelegatedLookup;


const conditionDelegatedLookup = ({
  target,
  recursive = false,
  conditionCheck = false || (prototypeTarget => prototypeTarget.constructor == Object) }) =>
{
  (0, _assert.default)(conditionCheck, 'â€¢ conditionCheck callback should be passed parameter.');
  return delegatedLookup({
    target,
    recursive,

    retrieveValueFromPrototype: targetObject => {
      return conditionCheck(targetObject) ? targetObject : undefined;
    } });

};exports.conditionDelegatedLookup = conditionDelegatedLookup;


const delegatedLookup = ({
  target,
  recursive = false,
  property,

  retrieveValueFromPrototype = (target, property) => target[property] ? target[property] : undefined } =
{}) => {
  let valueAggregatorArray = [],
  breakOnFirstMatch = !recursive,
  prototypeQueue = [target];
  while (
  prototypeQueue.length != 0 &&
  !(breakOnFirstMatch && valueAggregatorArray.length > 0))
  {
    let targetAggregator = [];
    for (let currentTarget of prototypeQueue) {
      let retrievedValue = retrieveValueFromPrototype(currentTarget, property);
      if (retrievedValue != undefined) valueAggregatorArray.push(retrievedValue);

      if (breakOnFirstMatch && valueAggregatorArray.length > 0) break;

      let targetPrototpye = Object.getPrototypeOf(currentTarget);

      if (Array.isArray(targetPrototpye) && currentTarget instanceof _multiplePrototypeDelegation.MultipleDelegation) {
        targetAggregator = [...targetAggregator, ...targetPrototpye];
      } else if (targetPrototpye) {
          targetAggregator.push(targetPrototpye);
        }
    }
    prototypeQueue = targetAggregator;
  }
  return recursive ? valueAggregatorArray : valueAggregatorArray[0];
};exports.delegatedLookup = delegatedLookup;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NvdXJjZS91dGlsaXR5L2RlbGVnYXRlZExvb2t1cC5qcyJdLCJuYW1lcyI6WyJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsIm5lc3RlZFByb3BlcnR5RGVsZWdhdGVkTG9va3VwIiwidGFyZ2V0IiwicmVjdXJzaXZlIiwicHJvcGVydHlQYXRoIiwiZGVsZWdhdGVkTG9va3VwIiwicmV0cmlldmVWYWx1ZUZyb21Qcm90b3R5cGUiLCJ0YXJnZXRPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJwcm9wZXJ0eVZhbHVlIiwicHJvcGVydHkiLCJjYWxsIiwidW5kZWZpbmVkIiwiY29uZGl0aW9uRGVsZWdhdGVkTG9va3VwIiwiY29uZGl0aW9uQ2hlY2siLCJwcm90b3R5cGVUYXJnZXQiLCJjb25zdHJ1Y3RvciIsInZhbHVlQWdncmVnYXRvckFycmF5IiwiYnJlYWtPbkZpcnN0TWF0Y2giLCJwcm90b3R5cGVRdWV1ZSIsImxlbmd0aCIsInRhcmdldEFnZ3JlZ2F0b3IiLCJjdXJyZW50VGFyZ2V0IiwicmV0cmlldmVkVmFsdWUiLCJwdXNoIiwidGFyZ2V0UHJvdG90cHllIiwiZ2V0UHJvdG90eXBlT2YiLCJNdWx0aXBsZURlbGVnYXRpb24iXSwibWFwcGluZ3MiOiI0UUFBQTtBQUNBOztBQUVBLE1BQU1BLGNBQWMsR0FBR0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCRixjQUF4Qzs7Ozs7QUFLTyxNQUFNRyw2QkFBNkIsR0FBRyxDQUFDO0FBQzVDQyxFQUFBQSxNQUQ0QztBQUU1Q0MsRUFBQUEsU0FBUyxHQUFHLEtBRmdDO0FBRzVDQyxFQUFBQSxZQUg0QyxFQUFEOzs7QUFNdkM7QUFDSixTQUFPQyxlQUFlLENBQUM7QUFDckJILElBQUFBLE1BRHFCO0FBRXJCQyxJQUFBQSxTQUZxQjs7QUFJckJHLElBQUFBLDBCQUEwQixFQUFFQyxZQUFZLElBQUk7QUFDMUMsVUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0wsWUFBZCxD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dCBhc3NlcnQgZnJvbSAnYXNzZXJ0J1xuaW1wb3J0IHsgTXVsdGlwbGVEZWxlZ2F0aW9uIH0gZnJvbSAnQGRlcGVuZGVuY3kvbXVsdGlwbGVQcm90b3R5cGVEZWxlZ2F0aW9uJ1xuaW1wb3J0IHsgbWV0YWRhdGEgfSBmcm9tICcuLi9mdW5jdGlvbmFsaXR5UHJvdG90eXBlL1N5bWJvbC5yZWZlcmVuY2UuanMnXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkgLy8gYWxsb3dzIHN1cHBvcnRpbmcgb2JqZWN0cyBkZWxlZmF0aW5nIG51bGwuXG5cbi8qKiBMb29rdXAgYWxnb3JpdGhtIHVzZWQgYnkgJ2Z1bmN0aW9uYWxpdHkgcHJvdG90eXBlJy5cbiAqIEluIGNhc2UgbXVsdGlwbGUgbWF0Y2hpbmcgcHJvcGVydGllcyB0aGUgYXJyYXkgcHJvZHVjZXMgaXMgb3JkZXJlZCBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0IHByb3BlcnR5IHRvIHRoZSBkZWxlZ2F0ZWQgKHBhcmVudCkgb2JqZWN0c2AgcHJvcGVydGllcy4gLy8gcHJvcGVydHkgaXMgbmVzdGVkIGluIG11bHRpcGxlIGxldmVscyBlLmcuIHRhcmdldFtzeW1ib2xdW2tleV1bcHJvcGVydHldXG4gKi9cbmV4cG9ydCBjb25zdCBuZXN0ZWRQcm9wZXJ0eURlbGVnYXRlZExvb2t1cCA9ICh7XG4gIHRhcmdldCxcbiAgcmVjdXJzaXZlID0gZmFsc2UsXG4gIHByb3BlcnR5UGF0aCwgLy8gZGlyZWN0IHByb3BlcnR5IC8gYmFzZSBwcm9wZXJ0eSB0byBjaGVjayBpbi5cbn06IHtcbiAgcHJvcGVydHlQYXRoOiBBcnJheSB8IFN0cmluZyxcbn0pID0+IHtcbiAgcmV0dXJuIGRlbGVnYXRlZExvb2t1cCh7XG4gICAgdGFyZ2V0LFxuICAgIHJlY3Vyc2l2ZSxcbiAgICAvLyBtdWx0aXBsZSBuZXN0ZWQgcHJvcGVydGllcyBsb29rdXBcbiAgICByZXRyaWV2ZVZhbHVlRnJvbVByb3RvdHlwZTogdGFyZ2V0T2JqZWN0ID0+IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wZXJ0eVBhdGgpKSBwcm9wZXJ0eVBhdGggPSBbcHJvcGVydHlQYXRoXSAvLyB1c2Ugc2FtZSBpbXBsZW1lbnRhdGlvbiBmb3IgYWxsIGNhc2VzLlxuICAgICAgbGV0IHByb3BlcnR5VmFsdWUgPSB0YXJnZXRPYmplY3RcbiAgICAgIGZvciAobGV0IHByb3BlcnR5IG9mIHByb3BlcnR5UGF0aCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0eVZhbHVlLCBwcm9wZXJ0eSkpIHByb3BlcnR5VmFsdWUgPSBwcm9wZXJ0eVZhbHVlW3Byb3BlcnR5XVxuICAgICAgICBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlXG4gICAgfSxcbiAgfSlcbn1cblxuLy8gUmV0dXJuIHRoZSBwcm90b3R5cGUvcHJvdG90eXBlcyB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbiBjaGVjay5cbmV4cG9ydCBjb25zdCBjb25kaXRpb25EZWxlZ2F0ZWRMb29rdXAgPSAoe1xuICB0YXJnZXQgLypUYXJnZXQgb2JqZWN0IHdpdGggZGVsZWdhdGlvbiBjaGFpbiB0byBsb29rdXAgaW4uKi8sXG4gIHJlY3Vyc2l2ZSA9IGZhbHNlLFxuICBjb25kaXRpb25DaGVjayA9IGZhbHNlIHx8IChwcm90b3R5cGVUYXJnZXQgPT4gcHJvdG90eXBlVGFyZ2V0LmNvbnN0cnVjdG9yID09IE9iamVjdCkgLypUaGUgY29uZGl0aW9uIHRoYXQgc2hvdWxkIGJlIG1ldCBvbiB0aGUgcHJvdG90eXBlIG9iamVjdCovLFxufSkgPT4ge1xuICBhc3NlcnQoY29uZGl0aW9uQ2hlY2ssICfigKIgY29uZGl0aW9uQ2hlY2sgY2FsbGJhY2sgc2hvdWxkIGJlIHBhc3NlZCBwYXJhbWV0ZXIuJylcbiAgcmV0dXJuIGRlbGVnYXRlZExvb2t1cCh7XG4gICAgdGFyZ2V0LFxuICAgIHJlY3Vyc2l2ZSxcbiAgICAvLyBtdWx0aXBsZSBuZXN0ZWQgcHJvcGVydGllcyBsb29rdXBcbiAgICByZXRyaWV2ZVZhbHVlRnJvbVByb3RvdHlwZTogdGFyZ2V0T2JqZWN0ID0+IHtcbiAgICAgIHJldHVybiBjb25kaXRpb25DaGVjayh0YXJnZXRPYmplY3QpID8gdGFyZ2V0T2JqZWN0IDogdW5kZWZpbmVkXG4gICAgfSxcbiAgfSlcbn1cblxuLy8gbG9va3VwIHJlY3Vyc2l2ZWx5IGZvciBwcm9wZXJ0eSBvbiB0YXJnZXRcbmV4cG9ydCBjb25zdCBkZWxlZ2F0ZWRMb29rdXAgPSAoe1xuICB0YXJnZXQsIC8vIHRoZSBvYmplY3QgdG8gbG9va3VwIHByb3BlcnR5IG9uLlxuICByZWN1cnNpdmUgPSBmYWxzZSwgLy8gcmVjdXNpdmVseSBsb29rdXAgYW5kIGFsbG93IHRvIHJldHVybiBtdWx0aXBsZSByZXN1bHRzLlxuICBwcm9wZXJ0eSwgLy8gb3B0aW9uYWwgYXMgdGhlIHByb3BlcnR5IGtleSBjYW4gYmUgaW4gdGhlIGNsb3N1cmUgb2YgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAvLyBjYWxsYmFjayB0byBoYW5kIG92ZXIgY29udHJvbCB0byBjYWxsZXIgZnVuY3Rpb24uXG4gIHJldHJpZXZlVmFsdWVGcm9tUHJvdG90eXBlID0gKHRhcmdldCwgcHJvcGVydHkpID0+ICh0YXJnZXRbcHJvcGVydHldID8gdGFyZ2V0W3Byb3BlcnR5XSA6IHVuZGVmaW5lZCksXG59ID0ge30pID0+IHtcbiAgbGV0IHZhbHVlQWdncmVnYXRvckFycmF5ID0gW10sXG4gICAgYnJlYWtPbkZpcnN0TWF0Y2ggPSAhcmVjdXJzaXZlLFxuICAgIHByb3RvdHlwZVF1ZXVlID0gW3RhcmdldF0gLy8gYXNzaWduIGludGlhbCB0YXJnZXRcbiAgd2hpbGUgKFxuICAgIHByb3RvdHlwZVF1ZXVlLmxlbmd0aCAhPSAwICYmXG4gICAgIShicmVha09uRmlyc3RNYXRjaCAmJiB2YWx1ZUFnZ3JlZ2F0b3JBcnJheS5sZW5ndGggPiAwKSAvLyBicmVhayBXaGlsZSBMb29wIGluIGNhc2Ugb25seSBhIHNpbmdsZSBtYXRjaCBpcyByZXF1aXJlZC5cbiAgKSB7XG4gICAgbGV0IHRhcmdldEFnZ3JlZ2F0b3IgPSBbXVxuICAgIGZvciAobGV0IGN1cnJlbnRUYXJnZXQgb2YgcHJvdG90eXBlUXVldWUpIHtcbiAgICAgIGxldCByZXRyaWV2ZWRWYWx1ZSA9IHJldHJpZXZlVmFsdWVGcm9tUHJvdG90eXBlKGN1cnJlbnRUYXJnZXQsIHByb3BlcnR5KSAvLyBjYWxsYmFjayBzaG91bGQgZGVjaWRlIHdoZXRoZXIgdG8gYWRkIHZhbHVlIHRvIHRoZSBhcnJheSBpZiBmb3VuZC5cbiAgICAgIGlmIChyZXRyaWV2ZWRWYWx1ZSAhPSB1bmRlZmluZWQpIHZhbHVlQWdncmVnYXRvckFycmF5LnB1c2gocmV0cmlldmVkVmFsdWUpXG5cbiAgICAgIGlmIChicmVha09uRmlyc3RNYXRjaCAmJiB2YWx1ZUFnZ3JlZ2F0b3JBcnJheS5sZW5ndGggPiAwKSBicmVhayAvLyBicmVhayBmb3IgbG9vcCBpbiBjYXNlIG9ubHkgYSBzaW5nbGUgbWF0Y2ggaXMgcmVxdWlyZWQuXG5cbiAgICAgIGxldCB0YXJnZXRQcm90b3RweWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudFRhcmdldClcbiAgICAgIC8vIGNoZWNrIGZvciBtdWx0aXBsZSBkZWxlZ2F0aW9uIHJldHVybiBhcnJheS5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldFByb3RvdHB5ZSkgJiYgY3VycmVudFRhcmdldCBpbnN0YW5jZW9mIE11bHRpcGxlRGVsZWdhdGlvbikge1xuICAgICAgICB0YXJnZXRBZ2dyZWdhdG9yID0gWy4uLnRhcmdldEFnZ3JlZ2F0b3IsIC4uLnRhcmdldFByb3RvdHB5ZV1cbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0UHJvdG90cHllIC8qIG5vdCBudWxsIG9yIHVuZGVmaW5lZCAqLykge1xuICAgICAgICB0YXJnZXRBZ2dyZWdhdG9yLnB1c2godGFyZ2V0UHJvdG90cHllKVxuICAgICAgfVxuICAgIH1cbiAgICBwcm90b3R5cGVRdWV1ZSA9IHRhcmdldEFnZ3JlZ2F0b3JcbiAgfVxuICByZXR1cm4gcmVjdXJzaXZlID8gdmFsdWVBZ2dyZWdhdG9yQXJyYXkgOiB2YWx1ZUFnZ3JlZ2F0b3JBcnJheVswXVxufVxuIl19